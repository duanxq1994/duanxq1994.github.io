<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[使用 httpclient 发送post请求]]></title>
    <url>%2F2017%2F08%2F17%2Fhttp%2F</url>
    <content type="text"><![CDATA[首先maven 依赖12345&lt;dependency&gt; &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt; &lt;artifactId&gt;httpmime&lt;/artifactId&gt; &lt;version&gt;4.3.6&lt;/version&gt;&lt;/dependency&gt; 代码123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354import org.apache.http.HttpEntity;import org.apache.http.client.methods.CloseableHttpResponse;import org.apache.http.client.methods.HttpPost;import org.apache.http.entity.ContentType;import org.apache.http.entity.mime.HttpMultipartMode;import org.apache.http.entity.mime.MultipartEntityBuilder;import org.apache.http.entity.mime.content.ByteArrayBody;import org.apache.http.entity.mime.content.FileBody;import org.apache.http.entity.mime.content.InputStreamBody;import org.apache.http.impl.client.CloseableHttpClient;import org.apache.http.impl.client.HttpClients;import org.apache.http.util.EntityUtils;import org.springframework.util.FileCopyUtils;import java.io.File;import java.io.FileInputStream;import java.io.IOException;import java.nio.charset.StandardCharsets;public class Test &#123; public static void main(String[] args) throws IOException &#123; String url = "http://localhost:8001/test.json"; String fieldName = "file";//接收字段名称 File file = new File("C:\\Users\\Admin\\Desktop\\example.png"); String fileName = file.getName();//文件名称 CloseableHttpClient client = HttpClients.createDefault(); HttpPost httpPost = new HttpPost(url); MultipartEntityBuilder builder = MultipartEntityBuilder.create(); //设置兼容模式，防止中文文件名乱码 builder.setCharset(StandardCharsets.UTF_8); builder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE); builder.addTextBody("key", "编码", ContentType.DEFAULT_TEXT.withCharset(StandardCharsets.UTF_8));// 没有后面这个编码，中文会乱码 //下面是三种发送文件的方式 file、inputStream、byte[] //三种方式可以同时存在 builder.addPart(fieldName, new FileBody(file));//① builder.addPart(fieldName, new ByteArrayBody(FileCopyUtils.copyToByteArray(file), fileName));//② builder.addPart(fieldName, new InputStreamBody(new FileInputStream(file), fileName));//③ //②、③两种方式fileName是关键，④⑤这种是没有传fileName的 // 没有fileName字段的话 spring mvc multipartFile接收不到文件 可以request.getPart(fieldName).getInputStream() builder.addBinaryBody(fieldName, FileCopyUtils.copyToByteArray(file));//④ builder.addBinaryBody(fieldName, new FileInputStream(file));//⑤ httpPost.setEntity(builder.build()); CloseableHttpResponse execute = client.execute(httpPost); if (execute.getStatusLine().getStatusCode() == 200) &#123; HttpEntity entity = execute.getEntity(); System.out.println(EntityUtils.toString(entity)); &#125; &#125;&#125;]]></content>
      <categories>
        <category>http</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git 方面]]></title>
    <url>%2F2017%2F08%2F06%2Fgit-%E6%96%B9%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[接触git刚开始接触git是在15年8月份，那时我刚毕业，第一份工作。当时是同事建议使用sourceTree（git图形化工具），我觉得很好用，当然也确实很好用，功能很强大各种操作、状态都很直接很容易，便于操作。尤其是当你理解了git的操作流程以后，各种merge、cherry-pick、reset等等操作，简直不要太方便，graph也非常的直观。 进阶后面接触到了IDEA，它里面自带了版本控制，功能、实用性、外观都可以和sourceTree相媲美，因为idea基本每天都要使用，sourceTree也就不怎么打开了，后面使用就少了。前不久一同事让我帮忙把一个本地项目上传到git服务上建立一个分支，他本地只有git客户端，当时我就想这还不简单，但后来事实是，我折腾了半天也没有把项目从服务器上clone下来。因为我对git命令行完全不熟悉，git-gui也所知甚少。后来我回到自己座位上，上网找了下gui的使用方法，也成功的从线上clone下来了，基本操作也照着走了一遍。认为也没什么难得就这样。昨天看了一篇文章，讲的是hexo，也就是现在在使用的东西，今天闲来无事，也就摸索摸索。因为其中又涉及到git的操作，我突然冒出一个想法，想用git命令行走一遍流程，不用说也知道，各种问题1$ git init 这个命令我甚至是第一次用到，还有很多命令，我也是基本没有使用过12$ git clone ** dir$ git remote add origin ** 总结有句话叫 “使用命令行的瞧不起用图像界面的”，想想可能真的不全是在装逼命令行是最能体现作者设计的初衷，或许使用图形界面的你，照样可以操作的行云流水，但会使用命令行操作，理解软件的本质，对你的理解、运用会大有裨益。 千万不要会用了，就万事大吉了，要多去思考，探索总是好的]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F08%2F06%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>hello</category>
      </categories>
      <tags>
        <tag>hello</tag>
      </tags>
  </entry>
</search>
